<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Birthday Brian Juma üéâ</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&amp;family=Rajdhani:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    /* ===== BASE STYLES ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      overflow-x: hidden;
    }
    
    body {
      font-family: 'Rajdhani', sans-serif;
      background: linear-gradient(135deg, #0a0a0f 0%, #0d1117 25%, #161b22 50%, #0d1117 75%, #0a0a0f 100%);
      color: #e6edf3;
      min-height: 100%;
    }
    
    /* ===== LOADER STYLES ===== */
    .loader-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #0a0a0f 0%, #0d1117 50%, #0a0a0f 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.8s ease, visibility 0.8s ease;
    }
    
    .loader-container.hidden {
      opacity: 0;
      visibility: hidden;
    }
    
    .loader-spinner {
      width: 80px;
      height: 80px;
      border: 3px solid rgba(0, 212, 255, 0.1);
      border-top: 3px solid #00d4ff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      box-shadow: 0 0 30px rgba(0, 212, 255, 0.4);
    }
    
    .loader-text {
      margin-top: 24px;
      font-family: 'Orbitron', monospace;
      font-size: 14px;
      color: #00d4ff;
      letter-spacing: 3px;
      animation: pulse 1.5s ease-in-out infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }
    
    /* ===== PARTICLE CANVAS ===== */
    #particles-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }
    
    /* ===== FIREWORKS CANVAS ===== */
    #fireworks-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 100;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    #fireworks-canvas.active {
      opacity: 1;
    }
    
    /* ===== FALLING FLOWERS ===== */
    .flower {
      position: fixed;
      top: -50px;
      z-index: 1;
      pointer-events: none;
      font-size: 24px;
      animation: fall linear forwards;
      opacity: 0.8;
    }
    
    @keyframes fall {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 0.8;
      }
      100% {
        transform: translateY(120%) rotate(720deg);
        opacity: 0;
      }
    }
    
    /* ===== MAIN CONTENT ===== */
    .main-wrapper {
      position: relative;
      z-index: 10;
      min-height: 100%;
      display: flex;
      flex-direction: column;
      padding: 20px;
    }
    
    /* ===== GLASSMORPHISM CARD ===== */
    .glass-card {
      background: rgba(13, 17, 23, 0.7);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(0, 212, 255, 0.15);
      border-radius: 24px;
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.4),
        0 0 60px rgba(0, 212, 255, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
    }
    
    /* ===== GREETING SECTION ===== */
    .greeting-container {
      text-align: center;
      padding: 40px 20px;
    }
    
    .time-greeting {
      font-family: 'Rajdhani', sans-serif;
      font-size: clamp(16px, 4vw, 24px);
      color: #8b949e;
      text-transform: uppercase;
      letter-spacing: 4px;
      margin-bottom: 16px;
      animation: fadeInUp 1s ease forwards;
    }
    
    .main-title {
      font-family: 'Orbitron', monospace;
      font-size: clamp(32px, 8vw, 72px);
      font-weight: 900;
      background: linear-gradient(135deg, #00d4ff 0%, #00ff88 50%, #00d4ff 100%);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientShift 3s ease infinite, float3D 4s ease-in-out infinite;
      text-shadow: 0 0 60px rgba(0, 212, 255, 0.5);
      filter: drop-shadow(0 0 30px rgba(0, 212, 255, 0.4));
    }
    
    @keyframes gradientShift {
      0%, 100% { background-position: 0% center; }
      50% { background-position: 200% center; }
    }
    
    @keyframes float3D {
      0%, 100% { transform: translateY(0) rotateX(0deg); }
      50% { transform: translateY(-10px) rotateX(5deg); }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .subtitle {
      font-size: clamp(16px, 3vw, 24px);
      color: #8b949e;
      margin-top: 20px;
      font-weight: 300;
      letter-spacing: 2px;
      animation: fadeInUp 1s ease 0.3s forwards;
      opacity: 0;
    }
    
    /* ===== VOICE BUTTON ===== */
    .voice-btn {
      margin-top: 24px;
      padding: 12px 32px;
      font-family: 'Orbitron', monospace;
      font-size: 14px;
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(0, 255, 136, 0.2));
      border: 1px solid rgba(0, 212, 255, 0.4);
      border-radius: 50px;
      color: #00d4ff;
      cursor: pointer;
      transition: all 0.3s ease;
      letter-spacing: 2px;
      animation: fadeInUp 1s ease 0.5s forwards;
      opacity: 0;
    }
    
    .voice-btn:hover {
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.4), rgba(0, 255, 136, 0.4));
      box-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
      transform: translateY(-2px);
    }
    
    .voice-btn:active {
      transform: translateY(0);
    }
    
    /* ===== 3D IMAGE GALLERY ===== */
    .gallery-section {
      padding: 40px 20px;
      perspective: 1200px;
    }
    
    .gallery-title {
      text-align: center;
      font-family: 'Orbitron', monospace;
      font-size: clamp(20px, 4vw, 32px);
      color: #00d4ff;
      margin-bottom: 40px;
      text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
    }
    
    .gallery-container {
      position: relative;
      width: 100%;
      max-width: 400px;
      height: 350px;
      margin: 0 auto;
      transform-style: preserve-3d;
    }
    
    .gallery-ring {
      position: absolute;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      animation: autoRotate 30s linear infinite;
    }
    
    .gallery-ring.paused {
      animation-play-state: paused;
    }
    
    @keyframes autoRotate {
      from { transform: rotateY(0deg); }
      to { transform: rotateY(360deg); }
    }
    
    .gallery-item {
      position: absolute;
      width: 120px;
      height: 120px;
      left: 50%;
      top: 50%;
      margin-left: -60px;
      margin-top: -60px;
      border-radius: 16px;
      overflow: hidden;
      background: linear-gradient(135deg, #1a1f26, #0d1117);
      border: 2px solid rgba(0, 212, 255, 0.3);
      box-shadow: 
        0 10px 40px rgba(0, 0, 0, 0.5),
        0 0 30px rgba(0, 212, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }
    
    .gallery-item:hover {
      box-shadow: 
        0 15px 50px rgba(0, 0, 0, 0.6),
        0 0 50px rgba(0, 212, 255, 0.4);
      z-index: 100;
    }
    
    .gallery-item .placeholder-icon {
      font-size: 48px;
      opacity: 0.7;
    }
    
    .gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      object-position: center;
    }
    
    /* ===== COUNTDOWN SECTION ===== */
    .countdown-section {
      padding: 40px 20px;
    }
    
    .countdown-title {
      text-align: center;
      font-family: 'Orbitron', monospace;
      font-size: clamp(18px, 3vw, 28px);
      color: #8b949e;
      margin-bottom: 30px;
      letter-spacing: 3px;
    }
    
    .countdown-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      max-width: 600px;
      margin: 0 auto;
    }
    
    .countdown-item {
      background: rgba(0, 212, 255, 0.05);
      border: 1px solid rgba(0, 212, 255, 0.2);
      border-radius: 16px;
      padding: 20px 10px;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .countdown-item:hover {
      background: rgba(0, 212, 255, 0.1);
      box-shadow: 0 0 30px rgba(0, 212, 255, 0.2);
    }
    
    .countdown-value {
      font-family: 'Orbitron', monospace;
      font-size: clamp(28px, 6vw, 48px);
      font-weight: 700;
      color: #00d4ff;
      text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
      line-height: 1;
    }
    
    .countdown-label {
      font-size: clamp(10px, 2vw, 14px);
      color: #8b949e;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-top: 8px;
    }
    
    .celebration-message {
      text-align: center;
      font-family: 'Orbitron', monospace;
      font-size: clamp(24px, 5vw, 42px);
      color: #00ff88;
      text-shadow: 0 0 30px rgba(0, 255, 136, 0.6);
      animation: celebratePulse 1s ease-in-out infinite;
      display: none;
    }
    
    .celebration-message.active {
      display: block;
    }
    
    @keyframes celebratePulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.8; }
    }
    
    /* ===== MESSAGE SECTION ===== */
    .message-section {
      padding: 40px 20px;
      text-align: center;
    }
    
    .message-card {
      max-width: 700px;
      margin: 0 auto;
      padding: 40px;
    }
    
    .message-text {
      font-size: clamp(18px, 3vw, 24px);
      line-height: 1.8;
      color: #c9d1d9;
      font-style: italic;
    }
    
    .message-signature {
      margin-top: 24px;
      font-family: 'Orbitron', monospace;
      font-size: 16px;
      color: #00d4ff;
      letter-spacing: 2px;
    }
    
    /* ===== FOOTER ===== */
    .footer {
      margin-top: auto;
      padding: 30px 20px;
    }
    
    .footer-content {
      max-width: 600px;
      margin: 0 auto;
      padding: 24px;
      text-align: center;
    }
    
    .social-links {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin-bottom: 20px;
    }
    
    .social-link {
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: rgba(0, 212, 255, 0.1);
      border: 1px solid rgba(0, 212, 255, 0.3);
      color: #00d4ff;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    .social-link:hover {
      background: rgba(0, 212, 255, 0.3);
      box-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
      transform: translateY(-4px);
    }
    
    .social-link svg {
      width: 24px;
      height: 24px;
      fill: currentColor;
    }
    
    .copyright {
      font-size: 14px;
      color: #8b949e;
      letter-spacing: 1px;
    }
    
    .copyright span {
      color: #00d4ff;
    }
    
    /* ===== SOUND TOGGLE ===== */
    .sound-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: rgba(13, 17, 23, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 212, 255, 0.3);
      color: #00d4ff;
      cursor: pointer;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .sound-toggle:hover {
      box-shadow: 0 0 20px rgba(0, 212, 255, 0.4);
    }
    
    .sound-toggle svg {
      width: 24px;
      height: 24px;
    }
    
    /* ===== CONFETTI ===== */
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      z-index: 99;
      pointer-events: none;
    }
    
    @keyframes confettiFall {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100%) rotate(720deg);
        opacity: 0;
      }
    }
    
    /* ===== RESPONSIVE ===== */
    @media (max-width: 768px) {
      .gallery-item {
        width: 90px;
        height: 90px;
        margin-left: -45px;
        margin-top: -45px;
      }
      
      .gallery-item .placeholder-icon {
        font-size: 36px;
      }
      
      .countdown-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      
      .message-card {
        padding: 24px;
      }
    }
    
    @media (max-width: 480px) {
      .main-wrapper {
        padding: 12px;
      }
      
      .gallery-container {
        height: 280px;
      }
      
      .gallery-item {
        width: 70px;
        height: 70px;
        margin-left: -35px;
        margin-top: -35px;
      }
      
      .gallery-item .placeholder-icon {
        font-size: 28px;
      }
    }
  </style>
  <style>body { box-sizing: border-box; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full"><!-- Loader -->
  <div class="loader-container" id="loader">
   <div class="loader-spinner"></div>
   <div class="loader-text">
    INITIALIZING BIRTHDAY EXPERIENCE...
   </div>
  </div><!-- Particle Background -->
  <canvas id="particles-canvas"></canvas><!-- Fireworks Canvas -->
  <canvas id="fireworks-canvas"></canvas><!-- Main Content -->
  <div class="main-wrapper"><!-- Greeting Section -->
   <section class="greeting-container">
    <p class="time-greeting" id="time-greeting">Good Morning</p>
    <h1 class="main-title" id="main-title">Happy Birthday, Brian!</h1>
    <p class="subtitle" id="subtitle">Software Engineer Extraordinaire üöÄ</p><button class="voice-btn" id="voice-btn"> üé§ PLAY GREETING </button>
   </section><!-- 3D Gallery Section -->
   <section class="gallery-section">
    <h2 class="gallery-title">‚ú® Memories Gallery ‚ú®</h2>
    <div class="gallery-container" id="gallery-container">
     <div class="gallery-ring" id="gallery-ring"><!-- Gallery items will be generated by JS -->
     </div>
    </div>
   </section><!-- Countdown Section -->
   <section class="countdown-section glass-card" style="max-width: 700px; margin: 0 auto;">
    <h2 class="countdown-title">‚è∞ BIRTHDAY COUNTDOWN ‚è∞</h2>
    <div class="countdown-grid" id="countdown-grid">
     <div class="countdown-item">
      <div class="countdown-value" id="days">
       00
      </div>
      <div class="countdown-label">
       Days
      </div>
     </div>
     <div class="countdown-item">
      <div class="countdown-value" id="hours">
       00
      </div>
      <div class="countdown-label">
       Hours
      </div>
     </div>
     <div class="countdown-item">
      <div class="countdown-value" id="minutes">
       00
      </div>
      <div class="countdown-label">
       Minutes
      </div>
     </div>
     <div class="countdown-item">
      <div class="countdown-value" id="seconds">
       00
      </div>
      <div class="countdown-label">
       Seconds
      </div>
     </div>
    </div>
    <div class="celebration-message" id="celebration-message">
     üéâ TODAY IS THE DAY! üéâ
    </div>
   </section><!-- Message Section -->
   <section class="message-section">
    <div class="message-card glass-card">
     <p class="message-text" id="message-text">Wishing you an incredible birthday filled with joy, success, and countless lines of bug-free code! May this year bring you amazing projects, brilliant innovations, and all the happiness you deserve. Keep coding, keep inspiring! üíª‚ú®</p>
     <p class="message-signature">‚Äî From Everyone Who Admires You</p>
    </div>
   </section><!-- Footer -->
   <footer class="footer">
    <div class="footer-content glass-card">
     <div class="social-links"><a href="https://www.linkedin.com/in/juma-brian-394161296/" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="LinkedIn">
       <svg viewbox="0 0 24 24">
        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
       </svg></a> <a href="https://vm.tiktok.com/ZS9eDDkds2mPC-fvLU8/" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="TikTok">
       <svg viewbox="0 0 24 24">
        <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z" />
       </svg></a> <a href="https://github.com/Okelo123" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="GitHub">
       <svg viewbox="0 0 24 24">
        <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" />
       </svg></a>
     </div>
     <p class="copyright">¬© 2026 <span>Brian Juma</span> Birthday Celebration</p>
    </div>
   </footer>
  </div><!-- Sound Toggle --> <button class="sound-toggle" id="sound-toggle" aria-label="Toggle Sound">
   <svg id="sound-on-icon" viewbox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
   </svg>
   <svg id="sound-off-icon" viewbox="0 0 24 24" fill="currentColor" style="display: none;"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" />
   </svg></button>
  <script>
    // ===== CONFIGURATION =====
    const defaultConfig = {
      celebrant_name: 'Brian Juma',
      birthday_date: '2026-02-23',
      main_message: 'Wishing you an incredible birthday filled with joy, success, and countless lines of bug-free code! May this year bring you amazing projects, brilliant innovations, and all the happiness you deserve. Keep coding, keep inspiring! üíª‚ú®',
      background_color: '#0a0a0f',
      accent_color: '#00d4ff',
      text_color: '#e6edf3',
      secondary_color: '#8b949e',
      highlight_color: '#00ff88'
    };
    
    let config = { ...defaultConfig };
    let soundEnabled = true;
    let celebrationTriggered = false;
    let fireworksActive = false;
    
    // ===== ELEMENT SDK INITIALIZATION =====
    async function initElementSdk() {
      if (window.elementSdk) {
        await window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (newConfig) => {
            config = { ...defaultConfig, ...newConfig };
            updateUI();
          },
          mapToCapabilities: (cfg) => ({
            recolorables: [
              {
                get: () => cfg.background_color || defaultConfig.background_color,
                set: (v) => { cfg.background_color = v; window.elementSdk.setConfig({ background_color: v }); }
              },
              {
                get: () => cfg.accent_color || defaultConfig.accent_color,
                set: (v) => { cfg.accent_color = v; window.elementSdk.setConfig({ accent_color: v }); }
              },
              {
                get: () => cfg.text_color || defaultConfig.text_color,
                set: (v) => { cfg.text_color = v; window.elementSdk.setConfig({ text_color: v }); }
              },
              {
                get: () => cfg.secondary_color || defaultConfig.secondary_color,
                set: (v) => { cfg.secondary_color = v; window.elementSdk.setConfig({ secondary_color: v }); }
              },
              {
                get: () => cfg.highlight_color || defaultConfig.highlight_color,
                set: (v) => { cfg.highlight_color = v; window.elementSdk.setConfig({ highlight_color: v }); }
              }
            ],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (cfg) => new Map([
            ['celebrant_name', cfg.celebrant_name || defaultConfig.celebrant_name],
            ['birthday_date', cfg.birthday_date || defaultConfig.birthday_date],
            ['main_message', cfg.main_message || defaultConfig.main_message]
          ])
        });
        config = { ...defaultConfig, ...window.elementSdk.config };
      }
    }
    
    // ===== UI UPDATE FUNCTION =====
    function updateUI() {
      const name = config.celebrant_name || defaultConfig.celebrant_name;
      const message = config.main_message || defaultConfig.main_message;
      const accent = config.accent_color || defaultConfig.accent_color;
      const text = config.text_color || defaultConfig.text_color;
      const secondary = config.secondary_color || defaultConfig.secondary_color;
      const highlight = config.highlight_color || defaultConfig.highlight_color;
      const bg = config.background_color || defaultConfig.background_color;
      
      // Update greeting (will be handled by startTimeUpdates interval)
      updateTimeGreeting(name);
      
      // Update message
      document.getElementById('message-text').textContent = message;
      
      // Update CSS custom properties
      document.body.style.background = `linear-gradient(135deg, ${bg} 0%, ${adjustColor(bg, 20)} 50%, ${bg} 100%)`;
      
      // Update accent colors
      document.querySelectorAll('.countdown-value, .gallery-title, .social-link, .voice-btn, .main-title').forEach(el => {
        if (el.classList.contains('main-title')) {
          el.style.background = `linear-gradient(135deg, ${accent} 0%, ${highlight} 50%, ${accent} 100%)`;
          el.style.backgroundSize = '200% auto';
          el.style.webkitBackgroundClip = 'text';
          el.style.webkitTextFillColor = 'transparent';
        } else {
          el.style.color = accent;
        }
      });
      
      // Update secondary text
      document.querySelectorAll('.time-greeting, .countdown-label, .countdown-title, .copyright').forEach(el => {
        el.style.color = secondary;
      });
      
      // Update main text
      document.querySelectorAll('.subtitle, .message-text').forEach(el => {
        el.style.color = el.classList.contains('subtitle') ? secondary : text;
      });
    }
    
    // Helper to adjust color brightness
    function adjustColor(hex, percent) {
      const num = parseInt(hex.replace('#', ''), 16);
      const amt = Math.round(2.55 * percent);
      const R = Math.min(255, Math.max(0, (num >> 16) + amt));
      const G = Math.min(255, Math.max(0, (num >> 8 & 0x00FF) + amt));
      const B = Math.min(255, Math.max(0, (num & 0x0000FF) + amt));
      return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
    }
    
    // ===== LOADER =====
    function hideLoader() {
      setTimeout(() => {
        document.getElementById('loader').classList.add('hidden');
      }, 2000);
    }
    
    // ===== TIME-BASED GREETING =====
    function getTimeBasedGreeting() {
      const hour = new Date().getHours();
      if (hour >= 0 && hour < 12) {
        return 'Good Morning';
      } else if (hour >= 12 && hour < 17) {
        return 'Good Afternoon';
      } else {
        return 'Good Evening';
      }
    }
    
    function getTimeBasedSubtitle() {
      const hour = new Date().getHours();
      let timeEmojiPhrase;
      
      if (hour >= 0 && hour < 12) {
        timeEmojiPhrase = 'Start your day üåÖ';
      } else if (hour >= 12 && hour < 17) {
        timeEmojiPhrase = 'Afternoon vibes üå§Ô∏è';
      } else {
        timeEmojiPhrase = 'Evening celebration üåô';
      }
      
      return `Software Engineer Extraordinaire üöÄ ¬∑ ${timeEmojiPhrase}`;
    }
    
    function updateTimeGreeting(name) {
      const timeGreeting = getTimeBasedGreeting();
      const subtitle = getTimeBasedSubtitle();
      document.getElementById('time-greeting').textContent = timeGreeting;
      document.getElementById('main-title').textContent = `Today is ${name}'s Birthday! üéâ`;
      document.getElementById('subtitle').textContent = subtitle;
    }
    
    // ===== START CONTINUOUS TIME UPDATES =====
    function startTimeUpdates(name) {
      // Update immediately
      updateTimeGreeting(name);
      
      // Update every minute
      setInterval(() => {
        updateTimeGreeting(name);
      }, 60000);
    }
    
    // ===== BIRTHDAY QUOTES =====
    const birthdayQuotes = [
      "May your birthday be filled with joy, laughter, and endless possibilities!",
      "Here's to another year of success, growth, and amazing achievements!",
      "Celebrate yourself today! You deserve all the happiness in the world!",
      "Cheers to the years gone by and to the many more to come!",
      "May this year bring you closer to your dreams and goals!",
      "Wishing you a day as special as you are, filled with love and wonder!",
      "May your birthday be the start of a wonderful new chapter!",
      "Here's to living, laughing, and loving to the fullest this year!"
    ];
    
    // ===== VOICE GREETING =====
    function speakGreeting() {
      if (!soundEnabled || !('speechSynthesis' in window)) return;
      
      const name = config.celebrant_name || defaultConfig.celebrant_name;
      const birthdayDate = config.birthday_date || defaultConfig.birthday_date;
      const birthday = new Date(birthdayDate + 'T00:00:00');
      const now = new Date();
      
      let diff = birthday - now;
      
      // If birthday has passed, set to next year
      if (diff < 0) {
        birthday.setFullYear(birthday.getFullYear() + 1);
        diff = birthday - now;
      }
      
      // Check if today is the birthday
      const isToday = now.toDateString() === new Date(birthdayDate).toDateString();
      
      let text = '';
      
      if (isToday) {
        // Birthday is today!
        const timeGreeting = getTimeBasedGreeting();
        const randomQuote = birthdayQuotes[Math.floor(Math.random() * birthdayQuotes.length)];
        text = `${timeGreeting} ${name}! Happy Birthday! ${randomQuote}`;
      } else {
        // Calculate remaining time
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        
        // Generate countdown message
        let timeMessage = '';
        if (days > 0) {
          timeMessage = `${days} day${days !== 1 ? 's' : ''} and ${hours} hour${hours !== 1 ? 's' : ''}`;
        } else if (hours > 0) {
          timeMessage = `${hours} hour${hours !== 1 ? 's' : ''} and ${minutes} minute${minutes !== 1 ? 's' : ''}`;
        } else {
          timeMessage = `${minutes} minute${minutes !== 1 ? 's' : ''}`;
        }
        
        text = `${name}'s birthday is in ${timeMessage}. Stay tuned for an amazing celebration!`;
      }
      
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.rate = 0.9;
      utterance.pitch = 1;
      utterance.volume = 0.8;
      
      speechSynthesis.cancel();
      speechSynthesis.speak(utterance);
    }
    
    // ===== PARTICLE BACKGROUND =====
    function initParticles() {
      const canvas = document.getElementById('particles-canvas');
      const ctx = canvas.getContext('2d');
      
      function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      resize();
      window.addEventListener('resize', resize);
      
      const particles = [];
      const particleCount = 80;
      
      for (let i = 0; i < particleCount; i++) {
        particles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          vx: (Math.random() - 0.5) * 0.5,
          vy: (Math.random() - 0.5) * 0.5,
          size: Math.random() * 2 + 1,
          opacity: Math.random() * 0.5 + 0.2
        });
      }
      
      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        particles.forEach(p => {
          p.x += p.vx;
          p.y += p.vy;
          
          if (p.x < 0) p.x = canvas.width;
          if (p.x > canvas.width) p.x = 0;
          if (p.y < 0) p.y = canvas.height;
          if (p.y > canvas.height) p.y = 0;
          
          const accent = config.accent_color || defaultConfig.accent_color;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
          ctx.fillStyle = accent + Math.floor(p.opacity * 255).toString(16).padStart(2, '0');
          ctx.fill();
        });
        
        // Draw connections
        particles.forEach((p1, i) => {
          particles.slice(i + 1).forEach(p2 => {
            const dx = p1.x - p2.x;
            const dy = p1.y - p2.y;
            const dist = Math.sqrt(dx * dx + dy * dy);
            
            if (dist < 120) {
              const accent = config.accent_color || defaultConfig.accent_color;
              ctx.beginPath();
              ctx.moveTo(p1.x, p1.y);
              ctx.lineTo(p2.x, p2.y);
              ctx.strokeStyle = accent + Math.floor((1 - dist / 120) * 40).toString(16).padStart(2, '0');
              ctx.stroke();
            }
          });
        });
        
        requestAnimationFrame(animate);
      }
      animate();
    }
    
    // ===== FALLING FLOWERS =====
    function createFlower() {
      const flowers = ['üå∏', 'üå∫', 'üíê', 'üå∑', 'üåπ', '‚ú®', 'üéä', 'üéâ'];
      const flower = document.createElement('div');
      flower.className = 'flower';
      flower.textContent = flowers[Math.floor(Math.random() * flowers.length)];
      flower.style.left = Math.random() * 100 + '%';
      flower.style.animationDuration = (Math.random() * 5 + 5) + 's';
      flower.style.fontSize = (Math.random() * 16 + 16) + 'px';
      document.body.appendChild(flower);
      
      setTimeout(() => flower.remove(), 10000);
    }
    
    function startFlowers() {
      setInterval(createFlower, 800);
    }
    
    // ===== PHOTO GALLERY URLS =====
    // Add your photos to the 'photos' folder, then update these paths
    const photos = [
      './photos/photo1.jpg', // Place your photos in the 'photos' folder
      './photos/photo2.jpeg',
      './photos/photo3.jpeg',
      './photos/photo4.jpg',
      './photos/photo5.jpg',
      './photos/photo6.jpg',
      './photos/photo7.jpg',
      './photos/photo8.jpeg'
    ];
    
    // ===== 3D GALLERY =====
    function initGallery() {
      const ring = document.getElementById('gallery-ring');
      const container = document.getElementById('gallery-container');
      const icons = ['üë®‚Äçüíª', 'üéÇ', 'üöÄ', 'üíª', 'üéâ', '‚≠ê', 'üéØ', 'üèÜ'];
      const itemCount = Math.min(photos.length, 8);
      
      for (let i = 0; i < itemCount; i++) {
        const item = document.createElement('div');
        item.className = 'gallery-item';
        const angle = (360 / itemCount) * i;
        const radius = window.innerWidth < 480 ? 100 : window.innerWidth < 768 ? 130 : 160;
        item.style.transform = `rotateY(${angle}deg) translateZ(${radius}px)`;
        
        // Use photos if available, fallback to icons
        if (photos[i]) {
          item.innerHTML = `<img src="${photos[i]}" alt="Photo ${i + 1}" onerror="this.innerHTML='${icons[i]}'" />`;
        } else {
          item.innerHTML = `<span class="placeholder-icon">${icons[i]}</span>`;
        }
        ring.appendChild(item);
      }
      
      // Mouse interaction
      let isMouseOver = false;
      let mouseX = 0;
      
      container.addEventListener('mouseenter', () => {
        isMouseOver = true;
        ring.classList.add('paused');
      });
      
      container.addEventListener('mouseleave', () => {
        isMouseOver = false;
        ring.classList.remove('paused');
      });
      
      container.addEventListener('mousemove', (e) => {
        if (isMouseOver) {
          const rect = container.getBoundingClientRect();
          mouseX = (e.clientX - rect.left - rect.width / 2) / rect.width;
          ring.style.transform = `rotateY(${mouseX * 180}deg)`;
        }
      });
    }
    
    // ===== COUNTDOWN TIMER =====
    function updateCountdown() {
      const birthdayDate = config.birthday_date || defaultConfig.birthday_date;
      const birthday = new Date(birthdayDate + 'T00:00:00');
      const now = new Date();
      
      let diff = birthday - now;
      
      // If birthday has passed this year, set to next year
      if (diff < 0) {
        birthday.setFullYear(birthday.getFullYear() + 1);
        diff = birthday - now;
      }
      
      // Check if today is the birthday
      const isToday = now.toDateString() === new Date(birthdayDate).toDateString();
      
      if (isToday && !celebrationTriggered) {
        triggerCelebration();
        celebrationTriggered = true;
      }
      
      if (isToday) {
        document.getElementById('countdown-grid').style.display = 'none';
        document.getElementById('celebration-message').classList.add('active');
      } else {
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        document.getElementById('days').textContent = String(days).padStart(2, '0');
        document.getElementById('hours').textContent = String(hours).padStart(2, '0');
        document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
        document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
      }
    }
    
    // ===== FIREWORKS SYSTEM =====
    function initFireworks() {
      const canvas = document.getElementById('fireworks-canvas');
      const ctx = canvas.getContext('2d');
      
      function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      resize();
      window.addEventListener('resize', resize);
      
      const fireworks = [];
      const particles = [];
      
      class Firework {
        constructor() {
          this.x = Math.random() * canvas.width;
          this.y = canvas.height;
          this.targetY = Math.random() * canvas.height * 0.5;
          this.speed = 8 + Math.random() * 4;
          this.exploded = false;
          const accent = config.accent_color || defaultConfig.accent_color;
          const highlight = config.highlight_color || defaultConfig.highlight_color;
          this.color = Math.random() > 0.5 ? accent : highlight;
        }
        
        update() {
          if (!this.exploded) {
            this.y -= this.speed;
            if (this.y <= this.targetY) {
              this.exploded = true;
              this.createParticles();
            }
          }
        }
        
        createParticles() {
          const particleCount = 50 + Math.floor(Math.random() * 30);
          for (let i = 0; i < particleCount; i++) {
            particles.push(new Particle(this.x, this.y, this.color));
          }
        }
        
        draw() {
          if (!this.exploded) {
            ctx.beginPath();
            ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
            ctx.fillStyle = this.color;
            ctx.fill();
            
            // Trail
            ctx.beginPath();
            ctx.moveTo(this.x, this.y);
            ctx.lineTo(this.x, this.y + 20);
            ctx.strokeStyle = this.color + '80';
            ctx.lineWidth = 2;
            ctx.stroke();
          }
        }
      }
      
      class Particle {
        constructor(x, y, color) {
          this.x = x;
          this.y = y;
          this.color = color;
          const angle = Math.random() * Math.PI * 2;
          const speed = Math.random() * 6 + 2;
          this.vx = Math.cos(angle) * speed;
          this.vy = Math.sin(angle) * speed;
          this.life = 1;
          this.decay = 0.015 + Math.random() * 0.01;
          this.size = Math.random() * 3 + 1;
        }
        
        update() {
          this.x += this.vx;
          this.y += this.vy;
          this.vy += 0.1; // Gravity
          this.vx *= 0.99;
          this.vy *= 0.99;
          this.life -= this.decay;
        }
        
        draw() {
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size * this.life, 0, Math.PI * 2);
          ctx.fillStyle = this.color + Math.floor(this.life * 255).toString(16).padStart(2, '0');
          ctx.fill();
        }
      }
      
      function animate() {
        if (!fireworksActive) {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          requestAnimationFrame(animate);
          return;
        }
        
        ctx.fillStyle = 'rgba(10, 10, 15, 0.2)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // Spawn new fireworks
        if (Math.random() < 0.05) {
          fireworks.push(new Firework());
        }
        
        // Update and draw fireworks
        for (let i = fireworks.length - 1; i >= 0; i--) {
          fireworks[i].update();
          fireworks[i].draw();
          if (fireworks[i].exploded) {
            fireworks.splice(i, 1);
          }
        }
        
        // Update and draw particles
        for (let i = particles.length - 1; i >= 0; i--) {
          particles[i].update();
          particles[i].draw();
          if (particles[i].life <= 0) {
            particles.splice(i, 1);
          }
        }
        
        requestAnimationFrame(animate);
      }
      animate();
    }
    
    function startFireworks() {
      fireworksActive = true;
      document.getElementById('fireworks-canvas').classList.add('active');
      
      // Stop after 15 seconds
      setTimeout(() => {
        fireworksActive = false;
        document.getElementById('fireworks-canvas').classList.remove('active');
      }, 15000);
    }
    
    // ===== CONFETTI =====
    function createConfetti() {
      const colors = [
        config.accent_color || defaultConfig.accent_color,
        config.highlight_color || defaultConfig.highlight_color,
        '#ff6b6b',
        '#feca57',
        '#ff9ff3'
      ];
      
      for (let i = 0; i < 50; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random() * 100 + '%';
          confetti.style.top = '-10px';
          confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
          confetti.style.width = (Math.random() * 10 + 5) + 'px';
          confetti.style.height = (Math.random() * 10 + 5) + 'px';
          confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
          confetti.style.animation = `confettiFall ${Math.random() * 3 + 2}s linear forwards`;
          document.body.appendChild(confetti);
          
          setTimeout(() => confetti.remove(), 5000);
        }, i * 50);
      }
    }
    
    // ===== CELEBRATION TRIGGER =====
    function triggerCelebration() {
      startFireworks();
      createConfetti();
      setTimeout(() => speakGreeting(), 1000);
      
      // Vibration on mobile
      if ('vibrate' in navigator) {
        navigator.vibrate([200, 100, 200, 100, 200]);
      }
    }
    
    // ===== SOUND TOGGLE =====
    function initSoundToggle() {
      const toggle = document.getElementById('sound-toggle');
      const onIcon = document.getElementById('sound-on-icon');
      const offIcon = document.getElementById('sound-off-icon');
      
      toggle.addEventListener('click', () => {
        soundEnabled = !soundEnabled;
        onIcon.style.display = soundEnabled ? 'block' : 'none';
        offIcon.style.display = soundEnabled ? 'none' : 'block';
        
        if (!soundEnabled) {
          speechSynthesis.cancel();
        }
      });
    }
    
    // ===== VOICE BUTTON =====
    function initVoiceButton() {
      document.getElementById('voice-btn').addEventListener('click', () => {
        speakGreeting();
      });
    }
    
    // ===== INITIALIZATION =====
    async function init() {
      await initElementSdk();
      
      hideLoader();
      updateUI();
      initParticles();
      initGallery();
      initFireworks();
      initSoundToggle();
      initVoiceButton();
      startFlowers();
      
      // Start time-based greeting updates (every minute)
      const name = config.celebrant_name || defaultConfig.celebrant_name;
      startTimeUpdates(name);
      
      // Start countdown
      updateCountdown();
      setInterval(updateCountdown, 1000);
      
      // Auto-speak greeting after loader (with user gesture requirement handling)
      setTimeout(() => {
        // Only auto-speak if user has interacted
        document.addEventListener('click', function autoSpeak() {
          speakGreeting();
          document.removeEventListener('click', autoSpeak);
        }, { once: true });
      }, 3000);
    }
    
    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9d2053ad177c5bc4',t:'MTc3MTc4MjYzNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>